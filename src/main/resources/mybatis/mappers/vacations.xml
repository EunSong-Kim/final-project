<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.last.mapper.VacationMapper">

	<select id="getItems" resultType="VacationItem">
		select 
			item_code as code,
			item_name as name,
			year_vacation_used as used,
			item_used as deleted,
			salary_payed as payed,
			note as note
		from
			vacation_items
		order by
			item_code asc
	</select>

	<select id="getItemByCode" parameterType="int" resultType="VacationItem">
		select 
			item_code as code,
			item_name as name,
			year_vacation_used as used,
			item_used as deleted,
			salary_payed as payed,
			note as note
		from
			vacation_items
		where
			item_code = #{value}
	</select>
	
	<!-- 
		void insertPost()
	 -->
	 <insert id="insertItem" parameterType="VacationItem">
	 	insert into vacation_items
	 		(item_code, item_name, year_vacation_used, item_used, salary_payed)
	 	values
	 		(#{code}, #{name}, #{used}, #{deleted}, #{payed})
	 </insert>
   
   <update id="updateItem" parameterType="VacationItem">
		update
			vacation_items
		set
			item_name = #{name},
			year_vacation_used = #{used},
			item_used = #{deleted},
			salary_payed = #{payed}
		where
			item_code = #{code}
	</update>	 
	 
	 <!--  
	 	근속연수별 휴가설정 조회 
	 -->
	 <select id="getYearVacationDay" resultType="VacationDay">
		select 
		    worked_year 	as workedYear,
		    vacation_days 	as vacationDays
		from
		    year_vacation_days
		order by
		    worked_year asc
    </select>
    
	 <!--  
	 	근속연수별 휴가설정 행추가 
	 -->
	 <insert id="insertYearVacationDay" parameterType="VacationDay">
	 	insert into year_vacation_days
   		 	(worked_year, vacation_days)
		values
			(#{workedYear}, #{vacationDays})
	 </insert>
	 
	 <!-- 근속연수별 휴가설정 수정 -->
	 <update id="updateYearVacationDay" parameterType="VacationDay">
	 	update
	 		year_vacation_days
	 	set  
		    worked_year 	= #{workedYear},
		    vacation_days 	= #{vacationDays}
		where 
			worked_year = #{workedYear}
	 </update>
	 
	 <!-- 근속연수별 휴가 삭제 -->
	 <delete id="deleteYearVacationDay" parameterType="VacationDay">
	 	delete from 
		    year_vacation_days
		where
		   worked_year = #{workedYear}
	 </delete>

</mapper>